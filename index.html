<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MonopolX by Mustafa Evleksiz</title>
    <meta name="theme-color" content="#FFD700">
    <script>
        // Only run Service Worker and manifest if on a server (avoids CORS errors on file://)
        if (window.location.protocol.startsWith('http')) {
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('sw.js').catch(err => {
                        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                            console.log('SW reg error:', err);
                        }
                    });
                });
            }
            const link = document.createElement('link');
            link.rel = 'manifest';
            link.href = 'manifest.json';
            document.head.appendChild(link);
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@400;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>

<body>
    <div id="bg-canvas"></div>
    <div class="setup-screen" id="setupScreen">
        <div class="game-header" style="margin-bottom: 20px; text-align: center; position: relative; z-index: 10; padding-top: 10px;">
            <div style="display: flex; align-items: center; justify-content: center;">
                <img src="assets/logo.png" alt="MONOPOLX LUXURY GAMING" loading="eager"
                    style="height: 100px; filter: drop-shadow(0 0 30px rgba(212,175,55,0.4)); animation: logoPulse 6s infinite alternate;">
            </div>
        </div>

        <div class="setup-container">
            <div class="setup-left">
                <div class="setup-card">
                    <h3 class="setup-title" id="playerConfigTitle">ğŸ‘¥ OYUNCU YAPILANDIRMASI</h3>
                    <div class="player-config-grid">
                        <div class="player-config-slot" data-p="1">
                            <div class="token-preview token-red" id="preview-p1" data-label="DEÄÄ°ÅTÄ°R"
                                onclick="openIconPicker(1)">ğŸš—</div>
                            <div style="flex:1">
                                <input type="text" id="p1" value="Mustafa" maxlength="10" placeholder=""
                                    data-placeholder-tr="Ä°sim Girin" data-placeholder-en="Enter Name"
                                    style="width:100%; margin-bottom:6px; background:transparent; border:none; border-bottom:1.5px solid rgba(212, 175, 55, 0.2); color:white; font-size:0.95rem; padding:4px 0; font-weight: 600; outline: none;">
                                <div style="display:flex; gap:6px;">
                                    <button class="btn-theme-selector" onclick="openPlayerTypeModal(1)" style="flex:1; height:36px; padding:6px 10px; font-size:0.75rem;">
                                        <span id="currentType1">ğŸ‘¤ Ä°nsan</span>
                                    </button>
                                    <button class="btn-theme-selector" id="persBtn1" onclick="openPlayerPersModal(1)" style="flex:1; height:36px; padding:6px 10px; font-size:0.75rem; display:none;">
                                        <span id="currentPers1">ğŸ² Rastgele</span>
                                    </button>
                                    <select id="t1" style="display:none;" onchange="autoName(1);togglePers(1);updatePlayerTypeDisplay(1);">
                                        <option value="human" selected>ğŸ‘¤ Ä°nsan</option>
                                        <option value="ai-easy">ğŸ¤– Kolay AI</option>
                                        <option value="ai-medium">ğŸ¤– Orta AI</option>
                                        <option value="ai-hard">ğŸ¤– Zor AI</option>
                                    </select>
                                    <select id="pers1" style="display:none;">
                                        <option value="Random" selected>ğŸ² Rastgele</option>
                                        <option value="Tycoon">ğŸ’¼ Kodaman</option>
                                        <option value="Banker">ğŸ¦ BankacÄ±</option>
                                        <option value="Opportunist">ğŸ¦Š FÄ±rsatÃ§Ä±</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="player-config-slot" data-p="2">
                            <div class="token-preview token-blue" id="preview-p2" data-label="DEÄÄ°ÅTÄ°R"
                                onclick="openIconPicker(2)">ğŸ©</div>
                            <div style="flex:1">
                                <input type="text" id="p2" value="Robot-1" maxlength="10"
                                    data-placeholder-tr="Ä°sim Girin" data-placeholder-en="Enter Name"
                                    style="width:100%; margin-bottom:6px; background:transparent; border:none; border-bottom:1.5px solid rgba(212, 175, 55, 0.2); color:white; font-size:0.95rem; padding:4px 0; font-weight: 600; outline: none;">
                                <div style="display:flex; gap:6px;">
                                    <button class="btn-theme-selector" onclick="openPlayerTypeModal(2)" style="flex:1; height:36px; padding:6px 10px; font-size:0.75rem;">
                                        <span id="currentType2">ğŸ¤– Zor AI</span>
                                    </button>
                                    <button class="btn-theme-selector" id="persBtn2" onclick="openPlayerPersModal(2)" style="flex:1; height:36px; padding:6px 10px; font-size:0.75rem;">
                                        <span id="currentPers2">ğŸ² Rastgele</span>
                                    </button>
                                    <select id="t2" style="display:none;" onchange="autoName(2);togglePers(2);updatePlayerTypeDisplay(2);">
                                        <option value="human">ğŸ‘¤ Ä°nsan</option>
                                        <option value="ai-easy">ğŸ¤– Kolay AI</option>
                                        <option value="ai-medium">ğŸ¤– Orta AI</option>
                                        <option value="ai-hard" selected>ğŸ¤– Zor AI</option>
                                    </select>
                                    <select id="pers2" style="display:none;">
                                        <option value="Random" selected>ğŸ² Rastgele</option>
                                        <option value="Tycoon">ğŸ’¼ Kodaman</option>
                                        <option value="Banker">ğŸ¦ BankacÄ±</option>
                                        <option value="Opportunist">ğŸ¦Š FÄ±rsatÃ§Ä±</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="player-config-slot" data-p="3">
                            <div class="token-preview token-green" id="preview-p3" data-label="DEÄÄ°ÅTÄ°R"
                                onclick="openIconPicker(3)">ğŸ•</div>
                            <div style="flex:1">
                                <input type="text" id="p3" value="Robot-2" maxlength="10"
                                    data-placeholder-tr="Ä°sim Girin" data-placeholder-en="Enter Name"
                                    style="width:100%; margin-bottom:6px; background:transparent; border:none; border-bottom:1.5px solid rgba(212, 175, 55, 0.2); color:white; font-size:0.95rem; padding:4px 0; font-weight: 600; outline: none;">
                                <div style="display:flex; gap:6px;">
                                    <button class="btn-theme-selector" onclick="openPlayerTypeModal(3)" style="flex:1; height:36px; padding:6px 10px; font-size:0.75rem;">
                                        <span id="currentType3">ğŸ¤– Zor AI</span>
                                    </button>
                                    <button class="btn-theme-selector" id="persBtn3" onclick="openPlayerPersModal(3)" style="flex:1; height:36px; padding:6px 10px; font-size:0.75rem;">
                                        <span id="currentPers3">ğŸ² Rastgele</span>
                                    </button>
                                    <select id="t3" style="display:none;" onchange="autoName(3);togglePers(3);updatePlayerTypeDisplay(3);">
                                        <option value="none">--- (KapalÄ±)</option>
                                        <option value="human">ğŸ‘¤ Ä°nsan</option>
                                        <option value="ai-easy">ğŸ¤– Kolay AI</option>
                                        <option value="ai-medium">ğŸ¤– Orta AI</option>
                                        <option value="ai-hard" selected>ğŸ¤– Zor AI</option>
                                    </select>
                                    <select id="pers3" style="display:none;">
                                        <option value="Random" selected>ğŸ² Rastgele</option>
                                        <option value="Tycoon">ğŸ’¼ Kodaman</option>
                                        <option value="Banker">ğŸ¦ BankacÄ±</option>
                                        <option value="Opportunist">ğŸ¦Š FÄ±rsatÃ§Ä±</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="player-config-slot" data-p="4">
                            <div class="token-preview token-yellow" id="preview-p4" data-label="DEÄÄ°ÅTÄ°R"
                                onclick="openIconPicker(4)">ğŸ¦–</div>
                            <div style="flex:1">
                                <input type="text" id="p4" value="Robot-3" maxlength="10"
                                    data-placeholder-tr="Ä°sim Girin" data-placeholder-en="Enter Name"
                                    style="width:100%; margin-bottom:6px; background:transparent; border:none; border-bottom:1.5px solid rgba(212, 175, 55, 0.2); color:white; font-size:0.95rem; padding:4px 0; font-weight: 600; outline: none;">
                                <div style="display:flex; gap:6px;">
                                    <button class="btn-theme-selector" onclick="openPlayerTypeModal(4)" style="flex:1; height:36px; padding:6px 10px; font-size:0.75rem;">
                                        <span id="currentType4">ğŸ¤– Kolay AI</span>
                                    </button>
                                    <button class="btn-theme-selector" id="persBtn4" onclick="openPlayerPersModal(4)" style="flex:1; height:36px; padding:6px 10px; font-size:0.75rem;">
                                        <span id="currentPers4">ğŸ² Rastgele</span>
                                    </button>
                                    <select id="t4" style="display:none;" onchange="autoName(4);togglePers(4);updatePlayerTypeDisplay(4);">
                                        <option value="none">--- (KapalÄ±)</option>
                                        <option value="human">ğŸ‘¤ Ä°nsan</option>
                                        <option value="ai-easy" selected>ğŸ¤– Kolay AI</option>
                                        <option value="ai-medium">ğŸ¤– Orta AI</option>
                                        <option value="ai-hard">ğŸ¤– Zor AI</option>
                                    </select>
                                    <select id="pers4" style="display:none;">
                                        <option value="Random" selected>ğŸ² Rastgele</option>
                                        <option value="Tycoon">ğŸ’¼ Kodaman</option>
                                        <option value="Banker">ğŸ¦ BankacÄ±</option>
                                        <option value="Opportunist">ğŸ¦Š FÄ±rsatÃ§Ä±</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="setup-card">
                    <h3 class="setup-title" id="mapSelectionTitle">ğŸ—ºï¸ HARÄ°TA SEÃ‡Ä°MÄ°</h3>
                    <button class="btn-theme-selector" onclick="openMapModal()">
                        <span id="currentMapName">ğŸ‡¹ğŸ‡· TÃ¼rkiye Turu</span>
                        <span id="mapSelectButtonText" style="opacity:0.6; font-size:0.75rem;">Harita SeÃ§</span>
                    </button>
                    <select id="mapSelect" style="display:none;">
                        <option value="turkiye" selected>ğŸ‡¹ğŸ‡· TÃ¼rkiye Turu</option>
                        <option value="superlig">âš½ SÃ¼per Lig</option>
                        <option value="istanbul">ğŸ™ï¸ Ä°stanbul BoÄŸazÄ±</option>
                        <option value="world">ğŸ—ºï¸ Global Cities</option>
                        <option value="mars">ğŸš€ Mars Kolonisi</option>
                    </select>
                </div>
                
                <button class="btn btn-start-game"
                    style="width:100%; height: 70px; font-size: 1.2rem; letter-spacing: 2px; font-weight: 900; margin-top:auto;"
                    onclick="startGame()" aria-label="Yeni oyuna baÅŸla" id="startGameBtn">YENÄ° OYUNA BAÅLA</button>
            </div>

            <div class="setup-right" style="border-left: 1px solid rgba(255,255,255,0.05); padding-left:30px;">
                <div class="setup-card">
                    <h3 class="setup-title" id="generalSettingsTitle">âš™ï¸ GENEL AYARLAR</h3>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
                        <div class="rule-item" style="flex-direction:column; align-items:flex-start; border:none;">
                            <label id="langLabelText" style="font-size:0.6rem; opacity:0.6; margin-bottom:5px; font-weight:800;">DÄ°L /
                                LANG</label>
                            <button class="btn-theme-selector" onclick="openLangModal()" style="width:100%; height:40px; padding:8px 14px; font-size:0.85rem;">
                                <span id="currentLangName">TÃ¼rkÃ§e</span>
                            </button>
                            <select id="setupLang" style="display:none;" onchange="currLang = this.value; updateLangUI(); selectLangFromModal(this.value);">
                                <option value="tr" selected>TÃ¼rkÃ§e</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                        <div class="rule-item" style="flex-direction:column; align-items:flex-start; border:none;">
                            <label id="speedLabelText" style="font-size:0.6rem; opacity:0.6; margin-bottom:5px; font-weight:800;">HIZ /
                                SPEED</label>
                            <button class="btn-theme-selector" onclick="openSpeedModal()" style="width:100%; height:40px; padding:8px 14px; font-size:0.85rem;">
                                <span id="currentSpeedName">Normal</span>
                            </button>
                            <select id="setupSpeed" style="display:none;" onchange="document.getElementById('speedRange').value = this.value; updateSpeedDisp(); selectSpeedFromModal(this.value);">
                                <option value="100">YavaÅŸ</option>
                                <option value="200" selected>Normal</option>
                                <option value="300">HÄ±zlÄ±</option>
                                <option value="400">ÅimÅŸek</option>
                            </select>
                        </div>
                        <div class="rule-item" style="display:flex; flex-direction:row; justify-content:space-between; align-items:center; grid-column:1/-1; border:none; padding-top:10px;">
                            <div style="flex:1; display:flex; flex-direction:column; align-items:flex-start;">
                                <label id="difficultyLabel" style="font-size:0.6rem; opacity:0.6; margin-bottom:5px; font-weight:800;">OYUN ZORLUÄU</label>
                                <button class="btn-theme-selector" onclick="openDifficultyModal()" style="width:100%; height:40px; padding:8px 14px; font-size:0.85rem;">
                                    <span id="currentDifficultyName">Normal</span>
                                </button>
                                <select id="difficultyLevel" style="display:none;" onchange="updateDifficultyDisplay(); selectDifficultyFromModal(this.value);">
                                    <option value="1">1 - En Kolay</option>
                                    <option value="2">2 - Kolay</option>
                                    <option value="3" selected>3 - Normal</option>
                                    <option value="4">4 - Zor</option>
                                    <option value="5">5 - En Zor</option>
                                </select>
                                <div id="difficultyDescription" style="display:none;"></div>
                            </div>
                            <div style="flex:0 0 auto; display:flex; flex-direction:column; align-items:flex-end; margin-left:20px;">
                                <label id="board3DLabel" style="font-size:0.65rem; opacity:0.6; margin-bottom:5px; font-weight:700; letter-spacing:0.5px;">3D TAHTA EFEKTÄ°</label>
                                <div class="rule-toggle" id="setup3DToggle" onclick="this.classList.toggle('on');"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="setup-card">
                    <h3 class="setup-title" id="themeTitle">ğŸ›ï¸ GÃ–RÃœNÃœM TEMASI</h3>
                    <button class="btn-theme-selector" onclick="openThemeModal()">
                        <span id="currentThemeName">Premium</span>
                        <span id="themeSelectButtonText" style="opacity:0.6; font-size:0.75rem;">Tema SeÃ§</span>
                    </button>
                </div>

                <div class="setup-card">
                    <h3 class="setup-title" id="gameRulesTitle">âš–ï¸ OYUN KURALLARI</h3>
                    <div class="rules-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="rule-item">
                            <label id="startingMoneyLabel" style="font-size:0.6rem; opacity:0.6;">BAÅLANGIÃ‡ $</label>
                            <input type="number" id="ruleStartMoney" value="1500" step="500" class="rule-input"
                                style="width:60px;">
                        </div>
                        <div class="rule-item">
                            <label id="salaryLabel" style="font-size:0.6rem; opacity:0.6;">MAAÅ</label>
                            <input type="number" id="ruleSalary" value="200" step="50" class="rule-input"
                                style="width:60px;">
                        </div>
                        <div class="rule-item">
                            <label id="parkPoolLabel" style="font-size:0.6rem; opacity:0.6;">PARK HAVUZU</label>
                            <div class="rule-toggle on" id="toggleParkPool" onclick="this.classList.toggle('on')"></div>
                        </div>
                        <div class="rule-item">
                            <label id="randomStartLabel" style="font-size:0.6rem; opacity:0.6;">RASTGELE BAÅL.</label>
                            <div class="rule-toggle on" id="toggleRandomStart" onclick="this.classList.toggle('on')">
                            </div>
                        </div>
                    </div>
                </div>
                
                <button id="resumeBtn" class="btn btn-resume-game"
                    style="width:100%; height:70px; font-size: 0.95rem; letter-spacing: 1.2px; font-weight: 700; display:none; margin-top:auto;"
                    onclick="loadGame()">Ã–NCEKÄ° OYUNA DEVAM ET</button>
            </div>
        </div>

        <div class="credit-badge">
            <span id="madeByText" style="opacity: 0.5;">Made by</span> <span>Mustafa Evleksiz</span>
            <small id="ver1"
                style="opacity: 0.4; font-size: 0.55rem; margin-left: 8px; font-weight: 500;">v0.4.1</small>
        </div>
    </div>
    <div class="game-wrapper" id="gameContainer" style="display:none">
        <!-- Mobile Header (Hidden on Desktop) -->
        <div class="mobile-header" style="display:none">
            <div class="mobile-player-info">
                <div id="mobCurrentIcon" style="font-size:1.5rem">ğŸš—</div>
                <div>
                    <div id="mobCurrentName" style="font-weight:800; font-size:0.9rem;">Mustafa</div>
                    <div id="mobCurrentMoney" class="mobile-money">1500â‚º</div>
                </div>
            </div>
            <img src="assets/logo.png" alt="MONOPOLX" onclick="location.reload()"
                style="height: 40px; cursor:pointer; filter: drop-shadow(0 2px 8px rgba(0,0,0,0.3)); transition: transform 0.3s ease;"
                onmouseover="this.style.transform='scale(1.05)'"
                onmouseout="this.style.transform='scale(1)'">
            <div style="display:flex; gap:5px;">
                <button class="btn btn-secondary"
                    style="padding:0; min-width:38px; height:38px; border-radius:10px; font-size:1.1rem; display:flex; align-items:center; justify-content:center; background:rgba(255,255,255,0.05);"
                    onclick="openStats()" title="Ä°statistikler">ğŸ“Š</button>
                <button class="btn btn-secondary"
                    style="padding:0; min-width:38px; height:38px; border-radius:10px; font-size:1.1rem; display:flex; align-items:center; justify-content:center; background:rgba(255,255,255,0.05);"
                    onclick="document.getElementById('quickSettingsModal').classList.add('active')"
                    title="Ayarlar">âš™ï¸</button>
            </div>
        </div>

        <!-- Sol Panel: Oyuncu Listesi -->
        <button class="panel-toggle panel-toggle-left" id="toggleLeftPanel" onclick="togglePanel('left')" aria-label="Sol paneli gÃ¶ster/gizle" title="Sol Paneli GÃ¶ster/Gizle">
            <span class="panel-toggle-icon">â—€</span>
        </button>
        <div class="side-panel players-side" id="leftPanel">
            <div
                style="text-align: center; margin-bottom: 30px; border-bottom: 1px solid rgba(255,255,255,0.08); padding-bottom: 25px;">
                <img src="assets/logo.png" alt="MONOPOLX LUXURY GAMING" loading="lazy"
                    style="width: 220px; height: auto; cursor:pointer; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5)); transition: transform 0.3s ease;"
                    onclick="location.reload()" onmouseover="this.style.transform='scale(1.05)'"
                    onmouseout="this.style.transform='scale(1)'" role="button" tabindex="0" aria-label="Ana sayfaya dÃ¶n">
                <div
                    style="font-size: 0.65rem; opacity: 0.7; letter-spacing: 3px; font-weight: 800; margin-top: 10px; color: var(--gold); text-transform: uppercase;">
                    <span id="ver2"
                        style="font-size: 0.5rem; opacity: 0.9; background: rgba(212,175,55,0.2); color: var(--gold); padding: 2px 6px; border-radius: 4px; border: 1px solid rgba(212,175,55,0.3);">v0.4.1</span>
                </div>
            </div>
            <h2 style="font-family: 'Bebas Neue'; color: var(--gold); font-size: 1.3rem; letter-spacing: 2px;">ğŸ‘¥
                OYUNCULAR</h2>
            <div id="playersPanel" style="display: flex; flex-direction: column; gap: 8px; margin-top:10px;"></div>
            <div id="parkDisp"
                style="margin-top: auto; padding: 12px 16px; background: rgba(255,255,255,0.03); border-radius: 12px; text-align: center; border: 1px solid rgba(255,255,255,0.08); backdrop-filter: blur(10px);">
            </div>
        </div>

        <!-- Orta Panel: Board -->
        <div class="center-panel">
            <div class="board-container">
                <div class="board" id="board"></div>
            </div>
        </div>

        <!-- Mobile Bottom Bar (Hidden on Desktop) -->
        <div class="mobile-bottom-bar" style="display:none">
            <button class="btn btn-secondary btn-mob-compact" id="mobTradeBtn" onclick="openTrade()">ğŸ”„</button>
            <button class="btn btn-secondary btn-mob-compact" id="mobBuildBtn" onclick="openBuild()">ğŸ—ï¸</button>
            <button class="btn btn-roll btn-roll-mob" id="mobRollBtn" onclick="rollDice()">ğŸ²</button>
            <button class="btn btn-action btn-mob-compact" id="mobBuyBtn" onclick="buyProp()" disabled>ğŸ </button>
            <button class="btn btn-end btn-mob-compact" id="mobEndBtn" onclick="endTurn()" disabled>â­ï¸</button>
        </div>

        <!-- SaÄŸ Panel: Kontroller ve Log -->
        <button class="panel-toggle panel-toggle-right" id="toggleRightPanel" onclick="togglePanel('right')" aria-label="SaÄŸ paneli gÃ¶ster/gizle" title="SaÄŸ Paneli GÃ¶ster/Gizle">
            <span class="panel-toggle-icon">â–¶</span>
        </button>
        <div class="side-panel" id="rightPanel">
            <h2 style="font-family: 'Bebas Neue'; color: var(--gold); font-size: 1.8rem; letter-spacing: 2px;">ğŸ®
                KONTROLLER</h2>
            <div class="controls-vertical">
                <div class="ai-waiting-overlay" id="aiOverlay">
                    <div style="font-size: 2rem; margin-bottom: 5px;">ğŸ¤–</div>
                    <div style="font-weight: 700; color: var(--gold); font-size: 0.9rem;">
                        <span id="aiWaitingPlayerName">Yapay Zeka</span> Bekleniyor<span class="loading-dots"></span>
                    </div>
                </div>
                <div id="turnIndicator"
                    style="text-align:center; padding:10px; background:rgba(255,255,255,0.05); border-radius:8px; margin-bottom:10px; border:1px solid rgba(255,255,255,0.1);">
                    <div style="font-size:0.7rem; opacity:0.7; text-transform:uppercase; letter-spacing:1px;">OYUN
                        SIRASI</div>
                    <div id="currentPlayerName" style="font-weight:700; color:var(--gold); font-size:1.1rem;">-
                    </div>
                </div>
                <button class="btn btn-roll" id="rollBtn" onclick="rollDice()" aria-label="Zar at">ğŸ² ZAR AT</button>
                <div id="jailControls" style="display:none; flex-direction: column; gap: 8px; margin-bottom: 8px;">
                    <button class="btn btn-action" onclick="payJail()">ğŸ’¸ CEZA Ã–DE (50â‚º)</button>
                    <button class="btn btn-secondary" id="useJailCardBtn" onclick="useJailCard()" disabled>ğŸ« KART
                        KULLAN</button>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <button class="btn btn-action" id="buyBtn" onclick="buyProp()" disabled aria-label="MÃ¼lk satÄ±n al">ğŸ  AL</button>
                    <button class="btn btn-action" id="auctionBtn" onclick="startAuction()" disabled
                        style="display:none">ğŸ”¨ Ä°hale</button>
                    <button class="btn btn-action" id="buildBtn" onclick="openBuild()" disabled>ğŸ—ï¸ EV</button>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px;">
                    <button class="btn btn-secondary" onclick="openTrade()" aria-label="Takas yap">ğŸ”„ TAKAS YAP</button>
                    <button class="btn btn-secondary" onclick="openMortgage()">ğŸ’° Ä°POTEK</button>
                </div>
                <div class="ui-settings"
                    style="margin-bottom:10px; background:rgba(255,255,255,0.04); padding:8px; border-radius:12px; border:1px solid rgba(255,255,255,0.05);">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
                        <span style="font-size:0.65rem; opacity:0.6; font-weight:700; letter-spacing:0.5px;">GÃ–RÃœNÃœM
                            TEMASI</span>
                        <div style="display:flex; gap:5px;">
                            <div onclick="setTheme('premium')"
                                style="width:16px; height:16px; border-radius:50%; background:#12141d; border:1px solid #d4af37; cursor:pointer;"
                                title="Premium"></div>
                            <div onclick="setTheme('marble')"
                                style="width:16px; height:16px; border-radius:50%; background:#f0f0f0; border:1px solid #aaa; cursor:pointer;"
                                title="Marble"></div>
                            <div onclick="setTheme('parchment')"
                                style="width:16px; height:16px; border-radius:50%; background:#ccb08a; border:1px solid #8d6e63; cursor:pointer;"
                                title="Paper"></div>
                            <div onclick="setTheme('cyber')"
                                style="width:16px; height:16px; border-radius:50%; background:#050510; border:1px solid #00f2ff; cursor:pointer;"
                                title="Cyber"></div>
                            <div onclick="setTheme('nature')"
                                style="width:16px; height:16px; border-radius:50%; background:#1b2e1b; border:1px solid #8bc34a; cursor:pointer;"
                                title="Nature"></div>
                            <div onclick="setTheme('royal')"
                                style="width:16px; height:16px; border-radius:50%; background:#4a0000; border:1px solid #ffcc00; cursor:pointer;"
                                title="Royal"></div>
                        </div>
                    </div>
                    <label
                        style="font-size:0.65rem; opacity:0.6; font-weight:700; letter-spacing:0.5px; display:block; margin-bottom:4px;">HIZ:
                        <span id="speedVal" style="color:var(--gold)">YAVAÅ</span></label>
                    <input type="range" id="speedRange" min="50" max="350" value="50" step="10"
                        style="width: 100%; cursor: pointer; accent-color: var(--gold); margin:4px 0;" oninput="updateSpeedDisp()">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:6px;">
                        <span style="font-size:0.65rem; opacity:0.6; font-weight:700; letter-spacing:0.5px;">3D TAHTA
                            EFEKTÄ°</span>
                        <div class="rule-toggle" id="toggle3D" onclick="toggle3DEffect()" style="transform:scale(0.75)">
                        </div>
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:6px;">
                        <span style="font-size:0.65rem; opacity:0.6; font-weight:700; letter-spacing:0.5px;">SES
                            EFEKTLERÄ°</span>
                        <div class="rule-toggle on" id="toggleSound" onclick="toggleSoundEffect()"
                            style="transform:scale(0.75)"></div>
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:6px;">
                        <span style="font-size:0.65rem; opacity:0.6; font-weight:700; letter-spacing:0.5px;">DÄ°L /
                            LANG</span>
                        <div onclick="toggleLang()"
                            style="cursor:pointer; font-size:0.65rem; font-weight:700; color:var(--gold); border:1px solid var(--gold); padding:2px 6px; border-radius:4px;"
                            id="langLabel">TR</div>
                    </div>
                </div>

                <button class="btn btn-end" id="endBtn" onclick="endTurn()" disabled aria-label="Turu bitir">â­ï¸ TURU BÄ°TÄ°R</button>
            </div>
            <h2 id="logHeader"
                style="font-family: 'Bebas Neue'; color: var(--gold); font-size: 1.8rem; letter-spacing: 2px; margin-top:10px; cursor:pointer; user-select:none;"
                onclick="secretCheatClick()">
                ğŸ“ KAYITLAR</h2>
            <div class="game-log" id="gameLog" style="flex:1; max-height:none;"></div>
        </div>
    </div>
    <div class="modal-overlay" id="themeModal" style="z-index: 10000;">
        <div class="modal" style="max-width: 600px; width: 95%; z-index: 10001;">
            <div
                style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; margin-bottom:20px;">
                <h2 id="themeModalTitle" style="color:var(--gold); margin:0;">ğŸ›ï¸ Tema SeÃ§</h2>
                <button class="btn-close-modal" onclick="closeModal('themeModal')" aria-label="Kapat">âœ•</button>
            </div>
            <div class="theme-modal-grid" style="display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; margin-bottom:20px;">
                <div class="theme-card-modal selected" id="theme-modal-premium" onclick="selectThemeFromModal('premium')">
                    <div style="background:#07070a; border:1px solid #d4af37; height:50px; border-radius:6px; margin-bottom:8px;">
                    </div>
                    <span style="font-size:0.75rem; font-weight:600;">Premium</span>
                </div>
                <div class="theme-card-modal" id="theme-modal-marble" onclick="selectThemeFromModal('marble')">
                    <div style="background:#f0f0f0; border:1px solid #ccc; height:50px; border-radius:6px; margin-bottom:8px;">
                    </div>
                    <span style="font-size:0.75rem; font-weight:600;">Marble</span>
                </div>
                <div class="theme-card-modal" id="theme-modal-parchment" onclick="selectThemeFromModal('parchment')">
                    <div style="background:#ccb08a; border:1px solid #8d6e63; height:50px; border-radius:6px; margin-bottom:8px;">
                    </div>
                    <span style="font-size:0.75rem; font-weight:600;">Paper</span>
                </div>
                <div class="theme-card-modal" id="theme-modal-cyber" onclick="selectThemeFromModal('cyber')">
                    <div style="background:#050510; border:1px solid #00f2ff; height:50px; border-radius:6px; margin-bottom:8px;">
                    </div>
                    <span style="font-size:0.75rem; font-weight:600;">Cyber</span>
                </div>
                <div class="theme-card-modal" id="theme-modal-nature" onclick="selectThemeFromModal('nature')">
                    <div style="background:#1b2e1b; border:1px solid #8bc34a; height:50px; border-radius:6px; margin-bottom:8px;">
                    </div>
                    <span style="font-size:0.75rem; font-weight:600;">Nature</span>
                </div>
                <div class="theme-card-modal" id="theme-modal-royal" onclick="selectThemeFromModal('royal')">
                    <div style="background:#4a0000; border:1px solid #ffcc00; height:50px; border-radius:6px; margin-bottom:8px;">
                    </div>
                    <span style="font-size:0.75rem; font-weight:600;">Royal</span>
                </div>
            </div>
            <div class="modal-buttons"
                style="margin-top:25px; border-top:1px solid rgba(255,255,255,0.05); padding-top:20px;">
                <button class="btn btn-secondary" style="width:100%" onclick="closeModal('themeModal')">Kapat</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="mapModal" style="z-index: 10000;">
        <div class="modal" style="max-width: 600px; width: 95%; z-index: 10001;">
            <div
                style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; margin-bottom:20px;">
                <h2 id="mapModalTitle" style="color:var(--gold); margin:0;">ğŸ—ºï¸ Harita SeÃ§</h2>
                <button class="btn-close-modal" onclick="closeModal('mapModal')" aria-label="Kapat">âœ•</button>
            </div>
            <div class="map-modal-grid" style="display:grid; grid-template-columns: repeat(2, 1fr); gap:12px; margin-bottom:20px;">
                <div class="map-card-modal selected" id="map-modal-turkiye" onclick="selectMapFromModal('turkiye')">
                    <div style="font-size:2.5rem; margin-bottom:8px;">ğŸ‡¹ğŸ‡·</div>
                    <span style="font-size:0.85rem; font-weight:600;">TÃ¼rkiye Turu</span>
                </div>
                <div class="map-card-modal" id="map-modal-superlig" onclick="selectMapFromModal('superlig')">
                    <div style="font-size:2.5rem; margin-bottom:8px;">âš½</div>
                    <span style="font-size:0.85rem; font-weight:600;">SÃ¼per Lig</span>
                </div>
                <div class="map-card-modal" id="map-modal-istanbul" onclick="selectMapFromModal('istanbul')">
                    <div style="font-size:2.5rem; margin-bottom:8px;">ğŸ™ï¸</div>
                    <span style="font-size:0.85rem; font-weight:600;">Ä°stanbul BoÄŸazÄ±</span>
                </div>
                <div class="map-card-modal" id="map-modal-world" onclick="selectMapFromModal('world')">
                    <div style="font-size:2.5rem; margin-bottom:8px;">ğŸ—ºï¸</div>
                    <span style="font-size:0.85rem; font-weight:600;">Global Cities</span>
                </div>
                <div class="map-card-modal" id="map-modal-mars" onclick="selectMapFromModal('mars')">
                    <div style="font-size:2.5rem; margin-bottom:8px;">ğŸš€</div>
                    <span style="font-size:0.85rem; font-weight:600;">Mars Kolonisi</span>
                </div>
            </div>
            <div class="modal-buttons"
                style="margin-top:25px; border-top:1px solid rgba(255,255,255,0.05); padding-top:20px;">
                <button class="btn btn-secondary" style="width:100%" onclick="closeModal('mapModal')" id="mapModalCloseBtn">Kapat</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="langModal" style="z-index: 10000;">
        <div class="modal" style="max-width: 400px; width: 95%; z-index: 10001;">
            <div
                style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; margin-bottom:20px;">
                <h2 id="langModalTitle" style="color:var(--gold); margin:0;">ğŸŒ Dil SeÃ§ / Language</h2>
                <button class="btn-close-modal" onclick="closeModal('langModal')" aria-label="Kapat">âœ•</button>
            </div>
            <div class="lang-modal-grid" style="display:grid; grid-template-columns: 1fr; gap:10px; margin-bottom:20px;">
                <div class="lang-card-modal selected" id="lang-modal-tr" onclick="selectLangFromModal('tr')">
                    <span style="font-size:1rem; font-weight:600;">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</span>
                </div>
                <div class="lang-card-modal" id="lang-modal-en" onclick="selectLangFromModal('en')">
                    <span style="font-size:1rem; font-weight:600;">ğŸ‡¬ğŸ‡§ English</span>
                </div>
            </div>
            <div class="modal-buttons"
                style="margin-top:25px; border-top:1px solid rgba(255,255,255,0.05); padding-top:20px;">
                <button class="btn btn-secondary" style="width:100%" onclick="closeModal('langModal')" id="langModalCloseBtn">Kapat</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="speedModal" style="z-index: 10000;">
        <div class="modal" style="max-width: 400px; width: 95%; z-index: 10001;">
            <div
                style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; margin-bottom:20px;">
                <h2 id="speedModalTitle" style="color:var(--gold); margin:0;">âš¡ HÄ±z SeÃ§ / Speed</h2>
                <button class="btn-close-modal" onclick="closeModal('speedModal')" aria-label="Kapat">âœ•</button>
            </div>
            <div class="speed-modal-grid" style="display:grid; grid-template-columns: 1fr; gap:10px; margin-bottom:20px;">
                <div class="speed-card-modal" id="speed-modal-100" onclick="selectSpeedFromModal('100')">
                    <span style="font-size:1rem; font-weight:600;">ğŸ¢ YavaÅŸ</span>
                </div>
                <div class="speed-card-modal selected" id="speed-modal-200" onclick="selectSpeedFromModal('200')">
                    <span style="font-size:1rem; font-weight:600;">âš¡ Normal</span>
                </div>
                <div class="speed-card-modal" id="speed-modal-300" onclick="selectSpeedFromModal('300')">
                    <span style="font-size:1rem; font-weight:600;">ğŸš€ HÄ±zlÄ±</span>
                </div>
                <div class="speed-card-modal" id="speed-modal-400" onclick="selectSpeedFromModal('400')">
                    <span style="font-size:1rem; font-weight:600;">âš¡ ÅimÅŸek</span>
                </div>
            </div>
            <div class="modal-buttons"
                style="margin-top:25px; border-top:1px solid rgba(255,255,255,0.05); padding-top:20px;">
                <button class="btn btn-secondary" style="width:100%" onclick="closeModal('speedModal')" id="speedModalCloseBtn">Kapat</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="difficultyModal" style="z-index: 10000;">
        <div class="modal" style="max-width: 500px; width: 95%; z-index: 10001;">
            <div
                style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; margin-bottom:20px;">
                <h2 id="difficultyModalTitle" style="color:var(--gold); margin:0;">âš–ï¸ Oyun ZorluÄŸu / Difficulty</h2>
                <button class="btn-close-modal" onclick="closeModal('difficultyModal')" aria-label="Kapat">âœ•</button>
            </div>
            <div class="difficulty-modal-grid" style="display:grid; grid-template-columns: 1fr; gap:10px; margin-bottom:20px;">
                <div class="difficulty-card-modal" id="difficulty-modal-1" onclick="selectDifficultyFromModal('1')">
                    <span style="font-size:1rem; font-weight:600;">En Kolay</span>
                </div>
                <div class="difficulty-card-modal" id="difficulty-modal-2" onclick="selectDifficultyFromModal('2')">
                    <span style="font-size:1rem; font-weight:600;">Kolay</span>
                </div>
                <div class="difficulty-card-modal selected" id="difficulty-modal-3" onclick="selectDifficultyFromModal('3')">
                    <span style="font-size:1rem; font-weight:600;">Normal</span>
                </div>
                <div class="difficulty-card-modal" id="difficulty-modal-4" onclick="selectDifficultyFromModal('4')">
                    <span style="font-size:1rem; font-weight:600;">Zor</span>
                </div>
                <div class="difficulty-card-modal" id="difficulty-modal-5" onclick="selectDifficultyFromModal('5')">
                    <span style="font-size:1rem; font-weight:600;">En Zor</span>
                </div>
            </div>
            <div class="modal-buttons"
                style="margin-top:25px; border-top:1px solid rgba(255,255,255,0.05); padding-top:20px;">
                <button class="btn btn-secondary" style="width:100%" onclick="closeModal('difficultyModal')" id="difficultyModalCloseBtn">Kapat</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="playerTypeModal" style="z-index: 10000;">
        <div class="modal" style="max-width: 400px; width: 95%; z-index: 10001;">
            <div
                style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; margin-bottom:20px;">
                <h2 id="playerTypeModalTitle" style="color:var(--gold); margin:0;">ğŸ‘¤ Oyuncu Tipi</h2>
                <button class="btn-close-modal" onclick="closeModal('playerTypeModal')" aria-label="Kapat">âœ•</button>
            </div>
            <div class="player-type-modal-grid" style="display:grid; grid-template-columns: 1fr; gap:10px; margin-bottom:20px;">
                <div class="player-type-card-modal" id="player-type-human" onclick="selectPlayerTypeFromModal('human')">
                    <span style="font-size:1rem; font-weight:600;">ğŸ‘¤ Ä°nsan</span>
                </div>
                <div class="player-type-card-modal" id="player-type-ai-easy" onclick="selectPlayerTypeFromModal('ai-easy')">
                    <span style="font-size:1rem; font-weight:600;">ğŸ¤– Kolay AI</span>
                </div>
                <div class="player-type-card-modal" id="player-type-ai-medium" onclick="selectPlayerTypeFromModal('ai-medium')">
                    <span style="font-size:1rem; font-weight:600;">ğŸ¤– Orta AI</span>
                </div>
                <div class="player-type-card-modal" id="player-type-ai-hard" onclick="selectPlayerTypeFromModal('ai-hard')">
                    <span style="font-size:1rem; font-weight:600;">ğŸ¤– Zor AI</span>
                </div>
                <div class="player-type-card-modal" id="player-type-none" onclick="selectPlayerTypeFromModal('none')" style="display:none;">
                    <span style="font-size:1rem; font-weight:600;">--- (KapalÄ±)</span>
                </div>
            </div>
            <div class="modal-buttons"
                style="margin-top:25px; border-top:1px solid rgba(255,255,255,0.05); padding-top:20px;">
                <button class="btn btn-secondary" style="width:100%" onclick="closeModal('playerTypeModal')" id="playerTypeModalCloseBtn">Kapat</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="playerPersModal" style="z-index: 10000;">
        <div class="modal" style="max-width: 400px; width: 95%; z-index: 10001;">
            <div
                style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; margin-bottom:20px;">
                <h2 id="playerPersModalTitle" style="color:var(--gold); margin:0;">ğŸ­ KiÅŸilik</h2>
                <button class="btn-close-modal" onclick="closeModal('playerPersModal')" aria-label="Kapat">âœ•</button>
            </div>
            <div class="player-pers-modal-grid" style="display:grid; grid-template-columns: 1fr; gap:10px; margin-bottom:20px;">
                <div class="player-pers-card-modal selected" id="player-pers-Random" onclick="selectPlayerPersFromModal('Random')">
                    <span style="font-size:1rem; font-weight:600;">ğŸ² Rastgele</span>
                </div>
                <div class="player-pers-card-modal" id="player-pers-Tycoon" onclick="selectPlayerPersFromModal('Tycoon')">
                    <span style="font-size:1rem; font-weight:600;">ğŸ’¼ Kodaman</span>
                </div>
                <div class="player-pers-card-modal" id="player-pers-Banker" onclick="selectPlayerPersFromModal('Banker')">
                    <span style="font-size:1rem; font-weight:600;">ğŸ¦ BankacÄ±</span>
                </div>
                <div class="player-pers-card-modal" id="player-pers-Opportunist" onclick="selectPlayerPersFromModal('Opportunist')">
                    <span style="font-size:1rem; font-weight:600;">ğŸ¦Š FÄ±rsatÃ§Ä±</span>
                </div>
            </div>
            <div class="modal-buttons"
                style="margin-top:25px; border-top:1px solid rgba(255,255,255,0.05); padding-top:20px;">
                <button class="btn btn-secondary" style="width:100%" onclick="closeModal('playerPersModal')" id="playerPersModalCloseBtn">Kapat</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="iconModal" style="z-index: 10000;">
        <div class="modal" style="max-width: 650px; width: 95%; z-index: 10001;">
            <div
                style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; margin-bottom:20px;">
                <h2 style="color:var(--gold); margin:0;" id="iconModalTitle">ğŸ­ Piyonunu SeÃ§</h2>
                <div style="font-size:0.7rem; opacity:0.5; font-weight:800; letter-spacing:1px;">MONOPOLX PREMIUM
                </div>
            </div>
            <div style="display:flex; gap:8px; flex-wrap:wrap; margin-bottom:20px;" id="iconCategories">
                <button class="icon-category-btn active" onclick="filterIcons('all', this)"
                    id="iconCatAll">TÃ¼mÃ¼</button>
                <button class="icon-category-btn" onclick="filterIcons('classic', this)"
                    id="iconCatClassic">Klasik</button>
                <button class="icon-category-btn" onclick="filterIcons('animals', this)"
                    id="iconCatAnimals">Hayvanlar</button>
                <button class="icon-category-btn" onclick="filterIcons('travel', this)" id="iconCatTravel">Gezi</button>
                <button class="icon-category-btn" onclick="filterIcons('objects', this)"
                    id="iconCatObjects">Objeler</button>
            </div>
            <div class="icon-modal-grid" id="iconGrid"></div>
            <div class="modal-buttons"
                style="margin-top:25px; border-top:1px solid rgba(255,255,255,0.05); padding-top:20px;">
                <button class="btn btn-secondary" style="width:100%" onclick="closeModal('iconModal')"
                    id="iconModalCancel">Ä°ptal</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="propModal">
        <div class="modal">
            <h2>ğŸ“‹ MÃ¼lk</h2>
            <div id="propInfo"></div>
            <div class="modal-details" id="propDetails"></div>
            <div class="modal-buttons"><button class="btn btn-secondary"
                    onclick="closeModal('propModal')">Kapat</button></div>
        </div>
    </div>
    <div class="modal-overlay" id="cardModal">
        <div class="modal">
            <h2 id="cardTitle">Kart</h2>
            <div class="card-display">
                <div class="card-inner">
                    <div class="card-icon" id="cardIcon">ğŸ´</div>
                    <p class="card-text" id="cardText"></p>
                </div>
            </div>
            <div class="modal-buttons"><button class="btn btn-roll" onclick="closeModal('cardModal')">Tamam</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="buildModal">
        <div class="modal">
            <h2>ğŸ—ï¸ Ä°nÅŸaat</h2>
            <div id="buildList"></div>
            <div class="modal-buttons"><button class="btn btn-secondary"
                    onclick="closeModal('buildModal')">Kapat</button></div>
        </div>
    </div>
    <div class="modal-overlay" id="tradeOfferModal">
        <div class="modal" style="max-width: 800px; border: 2px solid var(--gold); border-radius: 32px;">
            <div style="text-align:center; margin-bottom:25px;">
                <h2 id="tradeOfferHeader"
                    style="color:var(--gold); margin:0; font-size:2.2rem; filter: drop-shadow(0 0 15px rgba(212,175,55,0.4));">
                    ğŸ¤ TAKAS TEKLÄ°FÄ°</h2>
                <p id="tradeOfferText" style="opacity:0.9; margin-top:10px; font-weight:700; font-size:1.1rem;"></p>
            </div>

            <div class="trade-offer-summary">
                <div class="trade-offer-card receiving">
                    <div id="tradeOfferGiverLabel"
                        style="font-size:0.75rem; color:#f44336; font-weight:800; letter-spacing:2px; margin-bottom:15px; text-align:center; text-transform:uppercase;">
                        VERECEÄÄ°</div>
                    <div id="tradeOfferGiver"></div>
                </div>

                <div class="trade-offer-card giving">
                    <div id="tradeOfferTakerLabel"
                        style="font-size:0.75rem; color:#4caf50; font-weight:800; letter-spacing:2px; margin-bottom:15px; text-align:center; text-transform:uppercase;">
                        Ä°STEDÄ°ÄÄ°</div>
                    <div id="tradeOfferTaker"></div>
                </div>
            </div>

            <div class="modal-buttons"
                style="display:grid; grid-template-columns: 1.2fr 0.8fr; gap:15px; margin-top:10px;">
                <button class="btn btn-action" id="acceptTradeBtn" style="font-size:1.2rem; padding:18px;">âœ… KABUL
                    ET</button>
                <button class="btn btn-end" id="rejectTradeBtn" style="font-size:1.2rem; padding:18px;">âŒ
                    REDDET</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="mortgageModal">
        <div class="modal">
            <h2>ğŸ’° Ä°potek</h2>
            <div id="mortgageList"></div>
            <div class="modal-buttons"><button class="btn btn-secondary"
                    onclick="closeModal('mortgageModal')">Kapat</button></div>
        </div>
    </div>
    <div class="modal-overlay" id="tradeModal">
        <div class="modal" style="max-width: 900px; border-radius: 32px;">
            <div style="text-align:center; margin-bottom:20px;">
                <h2 id="tradeModalHeader" style="font-size:2rem; color:var(--gold); margin:0;">ğŸ”„ TAKAS SÄ°STEMÄ°</h2>
            </div>

            <div class="trade-select-container">
                <select id="tradePlayer" class="trade-select" onchange="updateTrade()"></select>
                <div
                    style="position:absolute; right:20px; top:50%; transform:translateY(-50%); pointer-events:none; opacity:0.5;">
                    â–¼</div>
            </div>

            <div class="trade-container">
                <!-- Giving Section -->
                <div class="trade-section giving">
                    <div class="trade-section-header" id="tradeYourOfferLabel">
                        <span>ğŸ“¤</span> VERECEÄÄ°N
                    </div>
                    <div class="trade-props" id="myProps"></div>
                    <div class="trade-money-input-container">
                        <span class="trade-money-icon">ğŸ’°</span>
                        <input type="number" class="trade-input" id="myMoney" placeholder="0" min="0">
                    </div>
                </div>

                <!-- Receiving Section -->
                <div class="trade-section receiving">
                    <div class="trade-section-header" id="tradeTheirOfferLabel">
                        <span>ğŸ“¥</span> ALACAÄIN
                    </div>
                    <div class="trade-props" id="theirProps"></div>
                    <div class="trade-money-input-container">
                        <span class="trade-money-icon">ğŸ’°</span>
                        <input type="number" class="trade-input" id="theirMoney" placeholder="0" min="0">
                    </div>
                </div>
            </div>

            <div class="modal-buttons" style="margin-top:25px; display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                <button id="tradeProposeBtn" class="btn btn-action" onclick="doTrade()"
                    style="padding:15px; font-size:1.1rem;">âœ… TEKLÄ°F ET</button>
                <button id="tradeCancelBtn" class="btn btn-secondary" onclick="closeModal('tradeModal')"
                    style="padding:15px; font-size:1.1rem;">Ä°PTAL</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="quickSettingsModal">
        <div class="modal" style="max-width: 320px;">
            <div style="text-align:center; margin-bottom:20px;">
                <h2 id="quickSettingsTitle" style="color:var(--gold); margin:0; font-size:1.4rem;">âš™ï¸ HIZLI AYARLAR</h2>
            </div>
            <div class="ui-settings"
                style="background:rgba(255,255,255,0.05); padding:15px; border-radius:12px; border:1px solid rgba(255,255,255,0.05);">
                <div style="display:flex; flex-direction:column; gap:10px; margin-bottom:15px;">
                    <label id="quickSettingsThemeLabel" style="font-size:0.75rem; font-weight:700; opacity:0.6;">TEMA DEÄÄ°ÅTÄ°R</label>
                    <button class="btn-theme-selector" onclick="openThemeModal()" style="width:100%; height:40px; padding:8px 14px; font-size:0.85rem; justify-content:space-between;">
                        <span id="quickSettingsCurrentThemeName">Premium</span>
                        <span style="opacity:0.6; font-size:0.75rem;">Tema SeÃ§</span>
                    </button>
                </div>
                <label id="quickSettingsSpeedLabel" style="font-size:0.75rem; font-weight:700; opacity:0.6; display:block; margin-bottom:8px;">OYUN HIZI</label>
                <input type="range" id="speedRangeMob" min="50" max="350" value="50" step="10"
                    style="width: 100%; cursor: pointer; accent-color: var(--gold); margin-bottom: 20px;"
                    oninput="document.getElementById('speedRange').value = this.value; updateSpeedDisp()">

                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <span id="quickSettings3DLabel" style="font-size:0.75rem; font-weight:700; opacity:0.6;">3D TAHTA</span>
                    <div class="rule-toggle" id="toggle3DMob" onclick="toggle3DEffect()" style="transform:scale(0.8)">
                    </div>
                </div>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <span id="quickSettingsSoundLabel" style="font-size:0.75rem; font-weight:700; opacity:0.6;">SES EFEKTLERÄ°</span>
                    <div class="rule-toggle on" id="toggleSoundMob" onclick="toggleSoundEffect()"
                        style="transform:scale(0.8)"></div>
                </div>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;">
                    <span id="quickSettingsLangLabel" style="font-size:0.75rem; font-weight:700; opacity:0.6;">DÄ°L / LANG</span>
                    <div onclick="toggleLang()"
                        style="cursor:pointer; font-size:0.75rem; font-weight:700; color:var(--gold); border:1px solid var(--gold); padding:4px 12px; border-radius:6px; transition: all 0.2s ease;"
                        id="langLabelMob">TR</div>
                </div>
            </div>
            <div class="modal-buttons" style="margin-top:20px;">
                <button class="btn btn-secondary" style="width:100%" id="quickSettingsCloseBtn"
                    onclick="closeModal('quickSettingsModal')">KAPAT</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="statsModal">
        <div class="modal" style="max-width: 450px;">
            <div style="text-align:center; margin-bottom:20px;">
                <h2 id="statsModalTitle" style="color:var(--gold); margin:0;">ğŸ“Š OYUN Ä°STATÄ°STÄ°KLERÄ°</h2>
            </div>
            <div id="statsContent"
                style="display:flex; flex-direction:column; gap:15px; max-height:60vh; overflow-y:auto; padding-right:5px;">
                <!-- Player Stat Cards -->
            </div>
            <div class="modal-buttons" style="margin-top:20px;">
                <button class="btn btn-secondary" style="width:100%" id="statsModalCloseBtn" onclick="closeModal('statsModal')">KAPAT</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="auctionModal">
        <div class="modal">
            <h2>ğŸ”¨ AÃ§Ä±k ArtÄ±rma</h2>
            <div id="auctionProp"></div>
            <div class="auction-bid" id="auctionBid">0â‚º</div>
            <div class="auction-info" id="auctionInfo"></div>
            <div class="auction-players" id="auctionPlayers"></div>
            <div class="bid-btns" id="bidBtns"></div>
        </div>
    </div>
    <div class="modal-overlay" id="winModal">
        <div class="modal">
            <h2>ğŸ† KAZANAN!</h2>
            <div class="card-display">
                <div class="card-inner">
                    <div class="card-icon">ğŸ‰</div>
                    <p class="card-text" id="winText"></p>
                </div>
            </div>
            <div class="modal-buttons"><button class="btn btn-roll" onclick="location.reload()">ğŸ”„ Yeni
                    Oyun</button>
            </div>
        </div>
    </div>
    <div id="toast-container" class="toast-container"></div>
    <script src="game.js"></script>
    <!-- Trade Response Popup -->
    <div class="trade-response-overlay" id="tradeResponseOverlay" onclick="hideTradeResponse()"></div>
    <div class="trade-response-popup" id="tradeResponsePopup">
        <div class="trade-response-icon" id="tradeResponseIcon">âœ…</div>
        <div class="trade-response-title" id="tradeResponseTitle">KABUL EDÄ°LDÄ°</div>
        <div class="trade-response-message" id="tradeResponseMessage">
            <span class="trade-response-player">Oyuncu</span> teklifi kabul etti!
        </div>
    </div>
</body>

</html>