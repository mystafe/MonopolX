<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MonopolX by Mustafa Evleksiz</title>
    <meta name="theme-color" content="#FFD700">
    <script>
        // Only run Service Worker and manifest if on a server (avoids CORS errors on file://)
        if (window.location.protocol.startsWith('http')) {
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('sw.js').catch(err => console.log('SW reg error:', err));
                });
            }
            const link = document.createElement('link');
            link.rel = 'manifest';
            link.href = 'manifest.json';
            document.head.appendChild(link);
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@400;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>

<body>
    <div id="bg-canvas"></div>
    <div class="setup-screen" id="setupScreen">
        <div class="game-header" style="margin-bottom: 30px; text-align: center; position: relative; z-index: 10;">
            <div style="display: flex; align-items: center; justify-content: center; gap: 20px;">
                <img src="assets/logo.png" alt="MONOPOLX"
                    style="height: 100px; filter: drop-shadow(0 0 30px rgba(212,175,55,0.4)); animation: logoPulse 6s infinite alternate;">
                <div style="text-align: left;">
                    <h1
                        style="color: var(--gold); font-family: 'Bebas Neue'; font-size: 3.5rem; letter-spacing: 12px; margin: 0; line-height: 1;">
                        MONOPOLX</h1>
                    <p
                        style="color: rgba(255,255,255,0.6); letter-spacing: 4px; font-weight: 600; font-size: 0.7rem; text-transform: uppercase; margin: 5px 0 0 4px;">
                        THE GLOBAL ESTATE REVOLUTION</p>
                </div>
            </div>
        </div>

        <div class="setup-container">
            <div class="setup-left">
                <div class="setup-card">
                    <h3 class="setup-title">üë• OYUNCU YAPILANDIRMASI</h3>
                    <div class="player-config-grid">
                        <div class="player-config-slot" data-p="1">
                            <div class="token-preview token-red" id="preview-p1" data-label="DEƒûƒ∞≈ûTƒ∞R"
                                onclick="openIconPicker(1)">üöó</div>
                            <div style="flex:1">
                                <input type="text" id="p1" value="Mustafa" maxlength="10" placeholder="ƒ∞sim Girin"
                                    style="width:100%; margin-bottom:6px; background:transparent; border:none; border-bottom:1.5px solid rgba(212, 175, 55, 0.2); color:white; font-size:0.95rem; padding:4px 0; font-weight: 600; outline: none;">
                                <div style="display:flex; gap:6px;">
                                    <select id="t1" class="player-type-select" style="flex:1"
                                        onchange="autoName(1);togglePers(1)">
                                        <option value="human" selected>üë§ ƒ∞nsan</option>
                                        <option value="ai-easy">ü§ñ Kolay AI</option>
                                        <option value="ai-medium">ü§ñ Orta AI</option>
                                        <option value="ai-hard">ü§ñ Zor AI</option>
                                    </select>
                                    <select id="pers1" class="player-type-select" style="flex:1; display:none;">
                                        <option value="Random">üé≤ Rastgele</option>
                                        <option value="Tycoon">üíº Kodaman</option>
                                        <option value="Banker">üè¶ Bankacƒ±</option>
                                        <option value="Opportunist">ü¶ä Fƒ±rsat√ßƒ±</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="player-config-slot" data-p="2">
                            <div class="token-preview token-blue" id="preview-p2" data-label="DEƒûƒ∞≈ûTƒ∞R"
                                onclick="openIconPicker(2)">üé©</div>
                            <div style="flex:1">
                                <input type="text" id="p2" value="Robot-1" maxlength="10"
                                    style="width:100%; margin-bottom:6px; background:transparent; border:none; border-bottom:1.5px solid rgba(212, 175, 55, 0.2); color:white; font-size:0.95rem; padding:4px 0; font-weight: 600; outline: none;">
                                <div style="display:flex; gap:6px;">
                                    <select id="t2" class="player-type-select" style="flex:1"
                                        onchange="autoName(2);togglePers(2)">
                                        <option value="human">üë§ ƒ∞nsan</option>
                                        <option value="ai-easy">ü§ñ Kolay AI</option>
                                        <option value="ai-medium">ü§ñ Orta AI</option>
                                        <option value="ai-hard" selected>ü§ñ Zor AI</option>
                                    </select>
                                    <select id="pers2" class="player-type-select" style="flex:1;">
                                        <option value="Random">üé≤ Rastgele</option>
                                        <option value="Tycoon">üíº Kodaman</option>
                                        <option value="Banker">üè¶ Bankacƒ±</option>
                                        <option value="Opportunist">ü¶ä Fƒ±rsat√ßƒ±</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="player-config-slot" data-p="3">
                            <div class="token-preview token-green" id="preview-p3" data-label="DEƒûƒ∞≈ûTƒ∞R"
                                onclick="openIconPicker(3)">üêï</div>
                            <div style="flex:1">
                                <input type="text" id="p3" value="Robot-2" maxlength="10"
                                    style="width:100%; margin-bottom:6px; background:transparent; border:none; border-bottom:1.5px solid rgba(212, 175, 55, 0.2); color:white; font-size:0.95rem; padding:4px 0; font-weight: 600; outline: none;">
                                <div style="display:flex; gap:6px;">
                                    <select id="t3" class="player-type-select" style="flex:1"
                                        onchange="autoName(3);togglePers(3)">
                                        <option value="none">--- (Kapalƒ±)</option>
                                        <option value="human">üë§ ƒ∞nsan</option>
                                        <option value="ai-easy">ü§ñ Kolay AI</option>
                                        <option value="ai-medium">ü§ñ Orta AI</option>
                                        <option value="ai-hard" selected>ü§ñ Zor AI</option>
                                    </select>
                                    <select id="pers3" class="player-type-select" style="flex:1;">
                                        <option value="Random">üé≤ Rastgele</option>
                                        <option value="Tycoon">üíº Kodaman</option>
                                        <option value="Banker">üè¶ Bankacƒ±</option>
                                        <option value="Opportunist">ü¶ä Fƒ±rsat√ßƒ±</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="player-config-slot" data-p="4">
                            <div class="token-preview token-yellow" id="preview-p4" data-label="DEƒûƒ∞≈ûTƒ∞R"
                                onclick="openIconPicker(4)">ü¶ñ</div>
                            <div style="flex:1">
                                <input type="text" id="p4" value="Robot-3" maxlength="10"
                                    style="width:100%; margin-bottom:6px; background:transparent; border:none; border-bottom:1.5px solid rgba(212, 175, 55, 0.2); color:white; font-size:0.95rem; padding:4px 0; font-weight: 600; outline: none;">
                                <div style="display:flex; gap:6px;">
                                    <select id="t4" class="player-type-select" style="flex:1"
                                        onchange="autoName(4);togglePers(4)">
                                        <option value="none">--- (Kapalƒ±)</option>
                                        <option value="human">üë§ ƒ∞nsan</option>
                                        <option value="ai-easy" selected>ü§ñ Kolay AI</option>
                                        <option value="ai-medium">ü§ñ Orta AI</option>
                                        <option value="ai-hard">ü§ñ Zor AI</option>
                                    </select>
                                    <select id="pers4" class="player-type-select" style="flex:1;">
                                        <option value="Random">üé≤ Rastgele</option>
                                        <option value="Tycoon">üíº Kodaman</option>
                                        <option value="Banker">üè¶ Bankacƒ±</option>
                                        <option value="Opportunist">ü¶ä Fƒ±rsat√ßƒ±</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="setup-card">
                    <h3 class="setup-title">üó∫Ô∏è HARƒ∞TA SE√áƒ∞Mƒ∞</h3>
                    <div style="display:flex; gap:12px; align-items:center;">
                        <select id="mapSelect" class="player-type-select"
                            style="flex:1; height:48px; border-color:rgba(212, 175, 55, 0.15); background:rgba(212, 175, 55, 0.05);">
                            <option value="turkiye" selected>üáπüá∑ T√ºrkiye Turu</option>
                            <option value="superlig">‚öΩ S√ºper Lig</option>
                            <option value="istanbul">üèôÔ∏è ƒ∞stanbul Boƒüazƒ±</option>
                            <option value="world">üó∫Ô∏è Global Cities</option>
                            <option value="mars">üöÄ Mars Kolonisi</option>
                        </select>
                        <div style="background:rgba(255, 61, 0, 0.08); padding:10px 14px; border-radius:14px; border:1px solid rgba(255, 61, 0, 0.2); display:flex; align-items:center; gap:10px;"
                            title="üî• CHALLENGE MODE: AI rakipler daha agresif oynar ve kira bedelleri %20 daha y√ºksektir.">
                            <input type="checkbox" id="challengeMode" style="width:20px; height:20px; cursor:pointer;"
                                checked>
                            <label for="challengeMode"
                                style="font-size:0.75rem; font-weight:900; color:#ff3d00; cursor:pointer; letter-spacing:1px;">CHALLENGE</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="setup-right" style="border-left: 1px solid rgba(255,255,255,0.05); padding-left:30px;">
                <div class="setup-card">
                    <h3 class="setup-title">‚öôÔ∏è GENEL AYARLAR</h3>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
                        <div class="rule-item" style="flex-direction:column; align-items:flex-start; border:none;">
                            <label style="font-size:0.6rem; opacity:0.6; margin-bottom:5px; font-weight:800;">Dƒ∞L /
                                LANG</label>
                            <select id="setupLang" class="player-type-select" style="width:100%; height:40px;"
                                onchange="currLang = this.value; updateLangUI();">
                                <option value="tr" selected>T√ºrk√ße</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                        <div class="rule-item" style="flex-direction:column; align-items:flex-start; border:none;">
                            <label style="font-size:0.6rem; opacity:0.6; margin-bottom:5px; font-weight:800;">HIZ /
                                SPEED</label>
                            <select id="setupSpeed" class="player-type-select" style="width:100%; height:40px;"
                                onchange="document.getElementById('speedRange').value = this.value; updateSpeedDisp();">
                                <option value="100">Yava≈ü</option>
                                <option value="200" selected>Normal</option>
                                <option value="300">Hƒ±zlƒ±</option>
                                <option value="400">≈ûim≈üek</option>
                            </select>
                        </div>
                        <div class="rule-item" style="grid-column:1/-1; border:none; padding-top:10px;">
                            <label style="font-size:0.75rem; font-weight:800; color:#fff;">3D TAHTA EFEKTƒ∞</label>
                            <div class="rule-toggle on" id="setup3DToggle" onclick="this.classList.toggle('on');"></div>
                        </div>
                    </div>
                </div>

                <div class="setup-card">
                    <h3 class="setup-title">üèõÔ∏è G√ñR√úN√úM TEMASI</h3>
                    <div class="theme-preview" style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px;">
                        <div class="theme-card selected" id="theme-premium" onclick="setTheme('premium')">
                            <div style="background:#07070a; border:1px solid #d4af37; height:30px; border-radius:4px;">
                            </div>
                            <span style="font-size:0.7rem;">Premium</span>
                        </div>
                        <div class="theme-card" id="theme-marble" onclick="setTheme('marble')">
                            <div style="background:#f0f0f0; border:1px solid #ccc; height:30px; border-radius:4px;">
                            </div>
                            <span style="font-size:0.7rem;">Marble</span>
                        </div>
                        <div class="theme-card" id="theme-parchment" onclick="setTheme('parchment')">
                            <div style="background:#ccb08a; border:1px solid #8d6e63; height:30px; border-radius:4px;">
                            </div>
                            <span style="font-size:0.7rem;">Paper</span>
                        </div>
                        <div class="theme-card" id="theme-cyber" onclick="setTheme('cyber')">
                            <div style="background:#050510; border:1px solid #00f2ff; height:30px; border-radius:4px;">
                            </div>
                            <span style="font-size:0.7rem;">Cyber</span>
                        </div>
                        <div class="theme-card" id="theme-nature" onclick="setTheme('nature')">
                            <div style="background:#1b2e1b; border:1px solid #8bc34a; height:30px; border-radius:4px;">
                            </div>
                            <span style="font-size:0.7rem;">Nature</span>
                        </div>
                        <div class="theme-card" id="theme-royal" onclick="setTheme('royal')">
                            <div style="background:#4a0000; border:1px solid #ffcc00; height:30px; border-radius:4px;">
                            </div>
                            <span style="font-size:0.7rem;">Royal</span>
                        </div>
                    </div>
                </div>

                <div class="setup-card">
                    <h3 class="setup-title">‚öñÔ∏è OYUN KURALLARI</h3>
                    <div class="rules-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="rule-item">
                            <label style="font-size:0.6rem; opacity:0.6;">BA≈ûLANGI√á $</label>
                            <input type="number" id="ruleStartMoney" value="1500" step="500" class="rule-input"
                                style="width:60px;">
                        </div>
                        <div class="rule-item">
                            <label style="font-size:0.6rem; opacity:0.6;">MAA≈û</label>
                            <input type="number" id="ruleSalary" value="200" step="50" class="rule-input"
                                style="width:60px;">
                        </div>
                        <div class="rule-item">
                            <label style="font-size:0.6rem; opacity:0.6;">PARK HAVUZU</label>
                            <div class="rule-toggle on" id="toggleParkPool" onclick="this.classList.toggle('on')"></div>
                        </div>
                        <div class="rule-item">
                            <label style="font-size:0.6rem; opacity:0.6;">RASTGELE BA≈ûL.</label>
                            <div class="rule-toggle on" id="toggleRandomStart" onclick="this.classList.toggle('on')">
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn btn-roll"
                    style="width:100%; height: 60px; font-size: 1.2rem; letter-spacing: 2px; margin-top: 10px;"
                    onclick="startGame()">OYUNA BA≈ûLA</button>

                <button id="resumeBtn" class="btn btn-secondary"
                    style="width:100%; margin-top:12px; height:50px; border-radius:15px; display:none;"
                    onclick="loadGame()">√ñNCEKƒ∞ OYUNA DEVAM ET</button>
            </div>
        </div>

        <div class="credit-badge">
            MADE BY <span style="color: var(--gold); font-weight: 800;">MUSTAFA EVLEKSƒ∞Z</span>
            <small id="ver1"
                style="opacity: 0.5; font-size: 0.6rem; margin-left: 10px; font-weight: 900;">v0.4.1</small>
        </div>
    </div>
    <div class="game-wrapper" id="gameContainer" style="display:none">
        <!-- Mobile Header (Hidden on Desktop) -->
        <div class="mobile-header" style="display:none">
            <div class="mobile-player-info">
                <div id="mobCurrentIcon" style="font-size:1.5rem">üöó</div>
                <div>
                    <div id="mobCurrentName" style="font-weight:800; font-size:0.9rem;">Mustafa</div>
                    <div id="mobCurrentMoney" class="mobile-money">1500‚Ç∫</div>
                </div>
            </div>
            <div onclick="location.reload()"
                style="font-family:'Bebas Neue'; color:var(--gold); font-size:1.4rem; letter-spacing:2px; cursor:pointer;">
                MONOPOLX</div>
            <div style="display:flex; gap:5px;">
                <button class="btn btn-secondary"
                    style="padding:0; min-width:38px; height:38px; border-radius:10px; font-size:1.1rem; display:flex; align-items:center; justify-content:center; background:rgba(255,255,255,0.05);"
                    onclick="openStats()" title="ƒ∞statistikler">üìä</button>
                <button class="btn btn-secondary"
                    style="padding:0; min-width:38px; height:38px; border-radius:10px; font-size:1.1rem; display:flex; align-items:center; justify-content:center; background:rgba(255,255,255,0.05);"
                    onclick="document.getElementById('quickSettingsModal').classList.add('active')"
                    title="Ayarlar">‚öôÔ∏è</button>
            </div>
        </div>

        <!-- Sol Panel: Oyuncu Listesi -->
        <div class="side-panel players-side">
            <div
                style="text-align: center; margin-bottom: 30px; border-bottom: 1px solid rgba(255,255,255,0.08); padding-bottom: 25px;">
                <img src="assets/logo.png" alt="MONOPOLX"
                    style="width: 200px; height: auto; cursor:pointer; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5)); transition: transform 0.3s ease;"
                    onclick="location.reload()" onmouseover="this.style.transform='scale(1.05)'"
                    onmouseout="this.style.transform='scale(1)'">
                <div
                    style="font-size: 0.65rem; opacity: 0.7; letter-spacing: 3px; font-weight: 800; margin-top: 10px; color: var(--gold); text-transform: uppercase;">
                    <span id="ver2"
                        style="font-size: 0.5rem; opacity: 0.9; background: rgba(212,175,55,0.2); color: var(--gold); padding: 2px 6px; border-radius: 4px; border: 1px solid rgba(212,175,55,0.3);">v0.4.1</span>
                </div>
            </div>
            <h2 style="font-family: 'Bebas Neue'; color: var(--gold); font-size: 1.3rem; letter-spacing: 2px;">üë•
                OYUNCULAR</h2>
            <div id="playersPanel" style="display: flex; flex-direction: column; gap: 8px; margin-top:10px;"></div>
            <div id="parkDisp"
                style="margin-top: auto; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 10px; text-align: center; border: 1px dashed var(--gold);">
            </div>
        </div>

        <!-- Orta Panel: Board -->
        <div class="center-panel">
            <div class="board-container">
                <div class="board" id="board"></div>
            </div>
        </div>

        <!-- Mobile Bottom Bar (Hidden on Desktop) -->
        <div class="mobile-bottom-bar" style="display:none">
            <button class="btn btn-secondary" onclick="openTrade()" title="Takas">üîÑ</button>
            <button class="btn btn-secondary" onclick="openBuild()" title="Ev/Otel">üèóÔ∏è</button>
            <button class="btn btn-roll btn-roll-mob" id="mobRollBtn" onclick="rollDice()">üé≤ ZAR AT</button>
            <button class="btn btn-action" id="mobBuyBtn" onclick="buyProp()" disabled>üè† AL</button>
            <button class="btn btn-end" id="mobEndBtn" onclick="endTurn()" disabled>‚è≠Ô∏è</button>
        </div>

        <!-- Saƒü Panel: Kontroller ve Log -->
        <div class="side-panel">
            <h2 style="font-family: 'Bebas Neue'; color: var(--gold); font-size: 1.8rem; letter-spacing: 2px;">üéÆ
                KONTROLLER</h2>
            <div class="controls-vertical">
                <div class="ai-waiting-overlay" id="aiOverlay">
                    <div style="font-size: 2rem; margin-bottom: 5px;">ü§ñ</div>
                    <div style="font-weight: 700; color: var(--gold); font-size: 0.9rem;">
                        <span id="aiWaitingPlayerName">Yapay Zeka</span> Bekleniyor<span class="loading-dots"></span>
                    </div>
                </div>
                <div id="turnIndicator"
                    style="text-align:center; padding:10px; background:rgba(255,255,255,0.05); border-radius:8px; margin-bottom:10px; border:1px solid rgba(255,255,255,0.1);">
                    <div style="font-size:0.7rem; opacity:0.7; text-transform:uppercase; letter-spacing:1px;">OYUN
                        SIRASI</div>
                    <div id="currentPlayerName" style="font-weight:700; color:var(--gold); font-size:1.1rem;">-
                    </div>
                </div>
                <button class="btn btn-roll" id="rollBtn" onclick="rollDice()">üé≤ ZAR AT</button>
                <div id="jailControls" style="display:none; flex-direction: column; gap: 8px; margin-bottom: 8px;">
                    <button class="btn btn-action" onclick="payJail()">üí∏ CEZA √ñDE (50‚Ç∫)</button>
                    <button class="btn btn-secondary" id="useJailCardBtn" onclick="useJailCard()" disabled>üé´ KART
                        KULLAN</button>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <button class="btn btn-action" id="buyBtn" onclick="buyProp()" disabled>üè† AL</button>
                    <button class="btn btn-action" id="auctionBtn" onclick="startAuction()" disabled
                        style="display:none">üî® ƒ∞hale</button>
                    <button class="btn btn-action" id="buildBtn" onclick="openBuild()" disabled>üèóÔ∏è EV</button>
                    <button class="btn btn-secondary" onclick="openMortgage()">üí∞ ƒ∞POTEK</button>
                </div>
                <button class="btn btn-secondary" style="width:100%" onclick="openTrade()">üîÑ TAKAS YAP</button>
                <div class="ui-settings"
                    style="margin-bottom:15px; background:rgba(255,255,255,0.04); padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.05);">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                        <span style="font-size:0.7rem; opacity:0.6; font-weight:700; letter-spacing:1px;">G√ñR√úN√úM
                            TEMASI</span>
                        <div style="display:flex; gap:8px;">
                            <div onclick="setTheme('premium')"
                                style="width:18px; height:18px; border-radius:50%; background:#12141d; border:1.5px solid #d4af37; cursor:pointer;"
                                title="Premium"></div>
                            <div onclick="setTheme('marble')"
                                style="width:18px; height:18px; border-radius:50%; background:#f0f0f0; border:1.5px solid #aaa; cursor:pointer;"
                                title="Marble"></div>
                            <div onclick="setTheme('parchment')"
                                style="width:18px; height:18px; border-radius:50%; background:#ccb08a; border:1.5px solid #8d6e63; cursor:pointer;"
                                title="Paper"></div>
                            <div onclick="setTheme('cyber')"
                                style="width:18px; height:18px; border-radius:50%; background:#050510; border:1.5px solid #00f2ff; cursor:pointer;"
                                title="Cyber"></div>
                            <div onclick="setTheme('nature')"
                                style="width:18px; height:18px; border-radius:50%; background:#1b2e1b; border:1.5px solid #8bc34a; cursor:pointer;"
                                title="Nature"></div>
                            <div onclick="setTheme('royal')"
                                style="width:18px; height:18px; border-radius:50%; background:#4a0000; border:1.5px solid #ffcc00; cursor:pointer;"
                                title="Royal"></div>
                        </div>
                    </div>
                    <label
                        style="font-size:0.7rem; opacity:0.6; font-weight:700; letter-spacing:1px; display:block; margin-bottom:5px;">HIZ:
                        <span id="speedVal" style="color:var(--gold)">YAVA≈û</span></label>
                    <input type="range" id="speedRange" min="50" max="350" value="50" step="10"
                        style="width: 100%; cursor: pointer; accent-color: var(--gold);" oninput="updateSpeedDisp()">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:12px;">
                        <span style="font-size:0.7rem; opacity:0.6; font-weight:700; letter-spacing:1px;">3D TAHTA
                            EFEKTƒ∞</span>
                        <div class="rule-toggle" id="toggle3D" onclick="toggle3DEffect()" style="transform:scale(0.8)">
                        </div>
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:12px;">
                        <span style="font-size:0.7rem; opacity:0.6; font-weight:700; letter-spacing:1px;">SES
                            EFEKTLERƒ∞</span>
                        <div class="rule-toggle on" id="toggleSound" onclick="toggleSoundEffect()"
                            style="transform:scale(0.8)"></div>
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:12px;">
                        <span style="font-size:0.7rem; opacity:0.6; font-weight:700; letter-spacing:1px;">Dƒ∞L /
                            LANG</span>
                        <div onclick="toggleLang()"
                            style="cursor:pointer; font-size:0.7rem; font-weight:700; color:var(--gold); border:1px solid var(--gold); padding:2px 8px; border-radius:4px;"
                            id="langLabel">TR</div>
                    </div>
                </div>

                <button class="btn btn-end" id="endBtn" onclick="endTurn()" disabled>‚è≠Ô∏è TURU Bƒ∞Tƒ∞R</button>
            </div>
            <h2 id="logHeader"
                style="font-family: 'Bebas Neue'; color: var(--gold); font-size: 1.8rem; letter-spacing: 2px; margin-top:10px; cursor:pointer; user-select:none;"
                onclick="secretCheatClick()">
                üìù KAYITLAR</h2>
            <div class="game-log" id="gameLog" style="flex:1; max-height:none;"></div>
        </div>
    </div>
    <div class="modal-overlay" id="iconModal" style="z-index: 10000;">
        <div class="modal" style="max-width: 650px; width: 95%; z-index: 10001;">
            <div
                style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; margin-bottom:20px;">
                <h2 style="color:var(--gold); margin:0;" id="iconModalTitle">üé≠ Piyonunu Se√ß</h2>
                <div style="font-size:0.7rem; opacity:0.5; font-weight:800; letter-spacing:1px;">MONOPOLX PREMIUM
                </div>
            </div>
            <div style="display:flex; gap:8px; flex-wrap:wrap; margin-bottom:20px;" id="iconCategories">
                <button class="icon-category-btn active" onclick="filterIcons('all', this)"
                    id="iconCatAll">T√ºm√º</button>
                <button class="icon-category-btn" onclick="filterIcons('classic', this)"
                    id="iconCatClassic">Klasik</button>
                <button class="icon-category-btn" onclick="filterIcons('animals', this)"
                    id="iconCatAnimals">Hayvanlar</button>
                <button class="icon-category-btn" onclick="filterIcons('travel', this)" id="iconCatTravel">Gezi</button>
                <button class="icon-category-btn" onclick="filterIcons('objects', this)"
                    id="iconCatObjects">Objeler</button>
            </div>
            <div class="icon-modal-grid" id="iconGrid"></div>
            <div class="modal-buttons"
                style="margin-top:25px; border-top:1px solid rgba(255,255,255,0.05); padding-top:20px;">
                <button class="btn btn-secondary" style="width:100%" onclick="closeModal('iconModal')"
                    id="iconModalCancel">ƒ∞ptal</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="propModal">
        <div class="modal">
            <h2>üìã M√ºlk</h2>
            <div id="propInfo"></div>
            <div class="modal-details" id="propDetails"></div>
            <div class="modal-buttons"><button class="btn btn-secondary"
                    onclick="closeModal('propModal')">Kapat</button></div>
        </div>
    </div>
    <div class="modal-overlay" id="cardModal">
        <div class="modal">
            <h2 id="cardTitle">Kart</h2>
            <div class="card-display">
                <div class="card-inner">
                    <div class="card-icon" id="cardIcon">üé¥</div>
                    <p class="card-text" id="cardText"></p>
                </div>
            </div>
            <div class="modal-buttons"><button class="btn btn-roll" onclick="closeModal('cardModal')">Tamam</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="buildModal">
        <div class="modal">
            <h2>üèóÔ∏è ƒ∞n≈üaat</h2>
            <div id="buildList"></div>
            <div class="modal-buttons"><button class="btn btn-secondary"
                    onclick="closeModal('buildModal')">Kapat</button></div>
        </div>
    </div>
    <div class="modal-overlay" id="tradeOfferModal">
        <div class="modal" style="max-width: 800px; border: 2px solid var(--gold); border-radius: 32px;">
            <div style="text-align:center; margin-bottom:25px;">
                <h2 id="tradeOfferHeader"
                    style="color:var(--gold); margin:0; font-size:2.2rem; filter: drop-shadow(0 0 15px rgba(212,175,55,0.4));">
                    ü§ù TAKAS TEKLƒ∞Fƒ∞</h2>
                <p id="tradeOfferText" style="opacity:0.9; margin-top:10px; font-weight:700; font-size:1.1rem;"></p>
            </div>

            <div class="trade-offer-summary">
                <div class="trade-offer-card receiving">
                    <div id="tradeOfferGiverLabel"
                        style="font-size:0.75rem; color:#f44336; font-weight:800; letter-spacing:2px; margin-bottom:15px; text-align:center; text-transform:uppercase;">
                        VERECEƒûƒ∞</div>
                    <div id="tradeOfferGiver"></div>
                </div>

                <div class="trade-offer-card giving">
                    <div id="tradeOfferTakerLabel"
                        style="font-size:0.75rem; color:#4caf50; font-weight:800; letter-spacing:2px; margin-bottom:15px; text-align:center; text-transform:uppercase;">
                        ƒ∞STEDƒ∞ƒûƒ∞</div>
                    <div id="tradeOfferTaker"></div>
                </div>
            </div>

            <div class="modal-buttons"
                style="display:grid; grid-template-columns: 1.2fr 0.8fr; gap:15px; margin-top:10px;">
                <button class="btn btn-action" id="acceptTradeBtn" style="font-size:1.2rem; padding:18px;">‚úÖ KABUL
                    ET</button>
                <button class="btn btn-end" id="rejectTradeBtn" style="font-size:1.2rem; padding:18px;">‚ùå
                    REDDET</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="mortgageModal">
        <div class="modal">
            <h2>üí∞ ƒ∞potek</h2>
            <div id="mortgageList"></div>
            <div class="modal-buttons"><button class="btn btn-secondary"
                    onclick="closeModal('mortgageModal')">Kapat</button></div>
        </div>
    </div>
    <div class="modal-overlay" id="tradeModal">
        <div class="modal" style="max-width: 900px; border-radius: 32px;">
            <div style="text-align:center; margin-bottom:20px;">
                <h2 id="tradeModalHeader" style="font-size:2rem; color:var(--gold); margin:0;">üîÑ TAKAS Sƒ∞STEMƒ∞</h2>
            </div>

            <div class="trade-select-container">
                <select id="tradePlayer" class="trade-select" onchange="updateTrade()"></select>
                <div
                    style="position:absolute; right:20px; top:50%; transform:translateY(-50%); pointer-events:none; opacity:0.5;">
                    ‚ñº</div>
            </div>

            <div class="trade-container">
                <!-- Giving Section -->
                <div class="trade-section giving">
                    <div class="trade-section-header" id="tradeYourOfferLabel">
                        <span>üì§</span> VERECEƒûƒ∞N
                    </div>
                    <div class="trade-props" id="myProps"></div>
                    <div class="trade-money-input-container">
                        <span class="trade-money-icon">üí∞</span>
                        <input type="number" class="trade-input" id="myMoney" placeholder="0" min="0">
                    </div>
                </div>

                <!-- Receiving Section -->
                <div class="trade-section receiving">
                    <div class="trade-section-header" id="tradeTheirOfferLabel">
                        <span>üì•</span> ALACAƒûIN
                    </div>
                    <div class="trade-props" id="theirProps"></div>
                    <div class="trade-money-input-container">
                        <span class="trade-money-icon">üí∞</span>
                        <input type="number" class="trade-input" id="theirMoney" placeholder="0" min="0">
                    </div>
                </div>
            </div>

            <div class="modal-buttons" style="margin-top:25px; display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                <button id="tradeProposeBtn" class="btn btn-action" onclick="doTrade()"
                    style="padding:15px; font-size:1.1rem;">‚úÖ TEKLƒ∞F ET</button>
                <button id="tradeCancelBtn" class="btn btn-secondary" onclick="closeModal('tradeModal')"
                    style="padding:15px; font-size:1.1rem;">ƒ∞PTAL</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="quickSettingsModal">
        <div class="modal" style="max-width: 320px;">
            <div style="text-align:center; margin-bottom:20px;">
                <h2 style="color:var(--gold); margin:0; font-size:1.4rem;">‚öôÔ∏è HIZLI AYARLAR</h2>
            </div>
            <div class="ui-settings"
                style="background:rgba(255,255,255,0.05); padding:15px; border-radius:12px; border:1px solid rgba(255,255,255,0.05);">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <span style="font-size:0.75rem; font-weight:700; opacity:0.6;">TEMA DEƒûƒ∞≈ûTƒ∞R</span>
                    <div style="display:flex; gap:10px;">
                        <div onclick="setTheme('premium')"
                            style="width:22px; height:22px; border-radius:50%; background:#12141d; border:2px solid #d4af37; cursor:pointer;">
                        </div>
                        <div onclick="setTheme('marble')"
                            style="width:22px; height:22px; border-radius:50%; background:#fff; border:2px solid #aaa; cursor:pointer;">
                        </div>
                        <div onclick="setTheme('parchment')"
                            style="width:22px; height:22px; border-radius:50%; background:#f4e4bc; border:2px solid #8d6e63; cursor:pointer;">
                        </div>
                    </div>
                </div>
                <label style="font-size:0.75rem; font-weight:700; opacity:0.6; display:block; margin-bottom:8px;">OYUN
                    HIZI</label>
                <input type="range" id="speedRangeMob" min="50" max="350" value="50" step="10"
                    style="width: 100%; cursor: pointer; accent-color: var(--gold); margin-bottom: 20px;"
                    oninput="document.getElementById('speedRange').value = this.value; updateSpeedDisp()">

                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <span style="font-size:0.75rem; font-weight:700; opacity:0.6;">3D TAHTA</span>
                    <div class="rule-toggle" id="toggle3DMob" onclick="toggle3DEffect()" style="transform:scale(0.8)">
                    </div>
                </div>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <span style="font-size:0.75rem; font-weight:700; opacity:0.6;">SES EFEKTLERƒ∞</span>
                    <div class="rule-toggle on" id="toggleSoundMob" onclick="toggleSoundEffect()"
                        style="transform:scale(0.8)"></div>
                </div>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;">
                    <span style="font-size:0.75rem; font-weight:700; opacity:0.6;" data-i18n="settings.language">Dƒ∞L
                        /
                        LANG</span>
                    <div onclick="toggleLang()"
                        style="cursor:pointer; font-size:0.75rem; font-weight:700; color:var(--gold); border:1px solid var(--gold); padding:4px 12px; border-radius:6px; transition: all 0.2s ease;"
                        id="langLabelMob">TR</div>
                </div>
            </div>
            <div class="modal-buttons" style="margin-top:20px;">
                <button class="btn btn-secondary" style="width:100%"
                    onclick="closeModal('quickSettingsModal')">KAPAT</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="statsModal">
        <div class="modal" style="max-width: 450px;">
            <div style="text-align:center; margin-bottom:20px;">
                <h2 style="color:var(--gold); margin:0;">üìä OYUN ƒ∞STATƒ∞STƒ∞KLERƒ∞</h2>
            </div>
            <div id="statsContent"
                style="display:flex; flex-direction:column; gap:15px; max-height:60vh; overflow-y:auto; padding-right:5px;">
                <!-- Player Stat Cards -->
            </div>
            <div class="modal-buttons" style="margin-top:20px;">
                <button class="btn btn-secondary" style="width:100%" onclick="closeModal('statsModal')">KAPAT</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="auctionModal">
        <div class="modal">
            <h2>üî® A√ßƒ±k Artƒ±rma</h2>
            <div id="auctionProp"></div>
            <div class="auction-bid" id="auctionBid">0‚Ç∫</div>
            <div class="auction-info" id="auctionInfo"></div>
            <div class="auction-players" id="auctionPlayers"></div>
            <div class="bid-btns" id="bidBtns"></div>
        </div>
    </div>
    <div class="modal-overlay" id="winModal">
        <div class="modal">
            <h2>üèÜ KAZANAN!</h2>
            <div class="card-display">
                <div class="card-inner">
                    <div class="card-icon">üéâ</div>
                    <p class="card-text" id="winText"></p>
                </div>
            </div>
            <div class="modal-buttons"><button class="btn btn-roll" onclick="location.reload()">üîÑ Yeni
                    Oyun</button>
            </div>
        </div>
    </div>
    <div id="toast-container" class="toast-container"></div>
    <script src="game.js"></script>
    <!-- Trade Response Popup -->
    <div class="trade-response-overlay" id="tradeResponseOverlay" onclick="hideTradeResponse()"></div>
    <div class="trade-response-popup" id="tradeResponsePopup">
        <div class="trade-response-icon" id="tradeResponseIcon">‚úÖ</div>
        <div class="trade-response-title" id="tradeResponseTitle">KABUL EDƒ∞LDƒ∞</div>
        <div class="trade-response-message" id="tradeResponseMessage">
            <span class="trade-response-player">Oyuncu</span> teklifi kabul etti!
        </div>
    </div>
</body>

</html>